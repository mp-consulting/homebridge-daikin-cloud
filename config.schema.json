{
  "pluginAlias": "DaikinCloud",
  "pluginType": "platform",
  "singular": true,
  "customUi": true,
  "headerDisplay": "Use the **Custom UI** tab above to authenticate with Daikin Cloud. The setup wizard will guide you through the OAuth process.",
  "footerDisplay": "For help, visit the [GitHub repository](https://github.com/mp-consulting/homebridge-daikin-cloud). API credentials can be obtained from the [Daikin Developer Portal](https://developer.cloud.daikineurope.com/).",
  "schema": {
    "type": "object",
    "properties": {
      "clientId": {
        "title": "Client ID",
        "description": "From your Daikin Developer Portal application",
        "type": "string",
        "required": true,
        "x-schema-form": {
          "placeholder": "Enter your Client ID"
        }
      },
      "clientSecret": {
        "title": "Client Secret",
        "description": "Keep this secret and never share it",
        "type": "string",
        "required": true,
        "x-schema-form": {
          "type": "password",
          "placeholder": "Enter your Client Secret"
        }
      },
      "callbackServerExternalAddress": {
        "title": "Callback Server Address",
        "description": "Your Homebridge server's external IP or domain (not localhost)",
        "type": "string",
        "required": true,
        "x-schema-form": {
          "placeholder": "e.g., 192.168.1.100"
        }
      },
      "callbackServerPort": {
        "title": "Callback Server Port",
        "description": "Port for the OAuth callback server",
        "type": "string",
        "required": false,
        "default": "8582",
        "x-schema-form": {
          "placeholder": "8582"
        }
      },
      "oidcCallbackServerBindAddr": {
        "title": "Callback Server Bind Address",
        "description": "Network interface to bind the callback server. Use 127.0.0.1 for local only, or 0.0.0.0 for all interfaces.",
        "type": "string",
        "required": false,
        "default": "127.0.0.1",
        "enum": ["127.0.0.1", "0.0.0.0"],
        "x-schema-form": {
          "titleMap": {
            "127.0.0.1": "127.0.0.1 (localhost only - recommended)",
            "0.0.0.0": "0.0.0.0 (all network interfaces)"
          }
        }
      },
      "showExtraFeatures": {
        "title": "Show Extra Features",
        "type": "boolean",
        "required": false,
        "default": false,
        "description": "Expose extra features like Streamer, Econo, and Powerful modes as HomeKit switches (only if supported by your device)"
      },
      "excludedDevicesByDeviceId": {
        "title": "Excluded Devices",
        "type": "array",
        "items": {
          "title": "Device ID",
          "type": "string",
          "x-schema-form": {
            "placeholder": "Device UUID"
          }
        },
        "description": "Exclude specific devices by their ID (found in Homebridge logs)"
      },
      "updateIntervalInMinutes": {
        "title": "Update Interval (minutes)",
        "type": "integer",
        "default": 15,
        "minimum": 5,
        "maximum": 60,
        "description": "How often to poll the Daikin API. Recommended: 15 minutes (96 API calls/day). Rate limit: 200 calls/day."
      },
      "forceUpdateDelay": {
        "title": "Force Update Delay (ms)",
        "type": "integer",
        "minimum": 10000,
        "maximum": 300000,
        "default": 60000,
        "description": "Delay after a change before refreshing data from API. The Daikin API may not reflect changes immediately."
      }
    }
  },
  "layout": [
    {
      "type": "fieldset",
      "title": "Authentication",
      "description": "Daikin Developer Portal credentials",
      "expandable": false,
      "items": [
        "clientId",
        "clientSecret"
      ]
    },
    {
      "type": "fieldset",
      "title": "Callback Server",
      "description": "OAuth callback server configuration",
      "expandable": true,
      "expanded": true,
      "items": [
        "callbackServerExternalAddress",
        "callbackServerPort",
        "oidcCallbackServerBindAddr"
      ]
    },
    {
      "type": "fieldset",
      "title": "Features",
      "description": "Optional feature configuration",
      "expandable": true,
      "expanded": false,
      "items": [
        "showExtraFeatures"
      ]
    },
    {
      "type": "fieldset",
      "title": "Advanced",
      "description": "Advanced settings",
      "expandable": true,
      "expanded": false,
      "items": [
        "updateIntervalInMinutes",
        "forceUpdateDelay",
        "excludedDevicesByDeviceId"
      ]
    }
  ]
}
